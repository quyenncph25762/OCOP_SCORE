{{> header}}
<div class="content-wrapper">
    <div class="container-fluid">
        {{!-- subHeader --}}
        <div class="row" style="max-width: 100%; display: contents;">
            <ul class="search-customer"
                style="list-style: none; display:flex; justify-content: start; align-items: center;">
                <a href="/scoreTemp" style="display: flex; align-items: center;cursor: pointer;">
                    <div class="import_customer_button"
                        style="list-style: none; display:flex; justify-content: space-between; align-items: center;">
                        <ion-icon name="arrow-undo-outline" style="font-size: 24px;"></ion-icon>
                    </div>
                    <label for="" class="mb-0 mt-1 ml-2">Trở về</label>
                </a>
            </ul>
        </div>
        {{!-- endSubheader --}}
        <div class="row" style="display: contents;">
            <div class="col-lg-12" style="max-width: 100%;">
                <div class="card">
                    <div class="card-body">
                        <button onclick="handleAdd()" type="button" class="btn btn-info mb-4"
                            style="flex: 1;text-align: right;margin-right: 0;display: flex;align-items: center;gap: 10px;"><ion-icon
                                name="file-tray-outline"></ion-icon>
                            <p style="margin-bottom: 0;">Lưu
                                thông
                                tin</p>
                        </button>
                        <form>
                            <div class="form-row">
                                <input type="text" id="CreatorUser_id" value="{{User._id}}" hidden>
                                <!-- code -->
                                <div class="col-md-4 mb-3">
                                    <label for="Code">Mã</label>
                                    <input type="text" name="Code" class="form-control" id="Code" value="" required>
                                </div>
                                <!-- name group product -->
                                <div class="col-md-8 mb-3">
                                    <label for="Name">Tên phiếu chấm</label>
                                    <input type="text" class="form-control" id="Name" name="Name" value="">
                                </div>
                                <!-- active -->
                                <div class="custom-control custom-switch col-md-2"
                                    style="display: flex; justify-content: center;align-items: center;">
                                    <input name="IsActive" type="checkbox" class="custom-control-input" id="IsActive"
                                        checked>
                                    <label class="custom-control-label block" for="IsActive">Áp
                                        dụng</label>
                                </div>
                                <!-- group product -->
                                <div class="custom-control custom-switch col-md-10">
                                    <label for="ProductGroup_id">Nhóm sản phẩm</label>
                                    <select name="ProductGroup_id state"
                                        class="custom-select my-1 form-control selectpicker" data-live-search="true"
                                        id="ProductGroup_id">
                                        <option selected>Choose...</option>
                                        {{#each productGroup}}
                                        <option value="{{this._id}}" data-tokens="{{this._id}}" {{#ifCond this.IsActive
                                            0}}disabled{{/ifCond}}>
                                            {{this.Name}}</option>
                                        {{/each}}
                                    </select>
                                </div>
                                <!-- note -->
                                <div class="col-md-12 mb-3 mt-3">
                                    <label for="Note">Ghi chú</label>
                                    <input name="Note" type="text" class="form-control" id="Note" required>
                                </div>
                                <!-- scoreTermDetail -->
                                <div class="panel-heading" style="font-size: 18px;padding: 0 10px;margin-top: 20px;">II
                                    - Chi
                                    tiết
                                    phiếu chấm
                                </div>
                                <div class=" col-md-12 mb-3 mt-3">
                                    <div class="panel-body">
                                        <table class="table table-bordered table__temptDetail">
                                            <thead>
                                                <tr>
                                                    <th scope="col">#</th>
                                                    <th scope="col">Nội dung</th>
                                                    <th scope="col">Chấm điểm</th>
                                                    <th scope="col">Điểm tối đa</th>
                                                    <th scope="col">Điều kiện xếp hạng</th>
                                                    <th scope="col">Viện dẫn</th>
                                                    <th scope="col">Ghi chú</th>
                                                    <th scope="col"></th>
                                                </tr>
                                            </thead>
                                            {{!-- body --}}
                                            <tbody id="education_fields">
                                            </tbody>
                                            <tfoot>
                                                <tr>
                                                    <td colspan="8" style="text-align: center;color: white;">
                                                        <button class="btn btn-info" type="button"
                                                            onclick="education_fields();"> <span
                                                                class="glyphicon glyphicon-plus"
                                                                aria-hidden="true"></span>Thêm</button>
                                                    </td>
                                                </tr>
                                            </tfoot>
                                        </table>
                                        <div class="clear"></div>
                                    </div>
                                </div>
                        </form>
                    </div>
                </div>
            </div><!--End content-wrapper-->
        </div>
    </div>
</div>
{{> footer}}

<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
        dataLayer.push(arguments);
    }
    gtag('js', new Date());
    gtag('config', 'UA-56159088-1');

    var room = 1;
    function education_fields() {
        room++;
        var objTo = document.getElementById('education_fields')
        var divtest = document.createElement("tr");
        divtest.setAttribute("class", "form-group removeclass" + room);
        var rdiv = 'removeclass' + room;
        const tableBody = () => {
            return `<tr>
                        <th scope="row">${room - 1}</th>
                        <textarea class="form-control" name="Name" id="NameDetail" required></textarea>
                        </td>
                        <td style="">
                        <div class="custom-control custom-switch" style="display: flex; justify-content: center;align-items: center;transform: translateY(-50%);">
                        <input type="checkbox" class="custom-control-input IsMark" name="isMark"  id="customSwitch${room + 1}">
                        <label class="custom-control-label block" for="customSwitch${room + 1}"></label>
                        </div>
                        </td>
                        <td >
                         <input min="0" style="max-width: 60px" name="maxPoint" id="MaxScoreDetail" type="number"/>
                        </td>
                        <td>
                            <div class="form-group">
                            <select id="ValidatedRankDetail" name="validateRank" class="form-control selectpicker" data-live-search="true"
                                        style="transform: translateY(10px);max-width: 200px;max-height: 200px;overflow-y: hidden;"
                                        data-target="#navbar-example2" data-offset="0">
                                        <option selected data-tokens="{{this._id}}">Không xác định</option>
                                        <option value="1">1 sao</option>
                                        <option value="2">2 sao</option>
                                        <option value="3">3 sao</option>
                                        <option value="4">4 sao</option>
                                        <option value="5">5 sao</option>
                                      </select>
                                    </div>
                                  </td>
                        <td>
                            <div class="form-group">
                            <select id="ProductDetailIdDetail" name="ProductDetailId state" class="form-control selectpicker"  data-live-search="true"
                                        style="transform: translateY(10px);max-width: 200px;max-height: 200px;overflow-y: hidden;"
                                        data-target="#navbar-example2" data-offset="0">
                                        <option selected></option>
                                        {{#each ProductDetail}}
                                        <option value={{this._id}} data-tokens="{{this._id}}">{{this.ProductDetail_Name}}</option>
                                        {{/each}}
                                      </select>
                                    </div>
                                  </td>
                                  <td>
                                   <textarea name="Note" id="NoteDetail" cols="10" rows="1"></textarea>
                                  </td>
                                  <td>
                                    <ion-icon onclick="remove_education_fields(${room});" class="icon__scoreTempDetail" name="trash-outline"></ion-icon>
                                  </td>
                                </tr>`
        }
        divtest.innerHTML = tableBody();
        objTo.appendChild(divtest)
        $(function () {
            $('.selectpicker').selectpicker();
        });
    }
    function remove_education_fields(rid) {
        console.log(rid)
        room--
        $('.removeclass' + rid).remove();
    }
</script>

{{!-- random --}}
<script>
    const codeValue = document.querySelector("#Code")

    function generateRandomCode(length) {
        let characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ123456789';
        let code = '';
        for (let i = 0; i < length; i++) {
            code += characters.charAt(Math.floor(Math.random() * characters.length));
        }
        return code;
    }
    const codeRandom = generateRandomCode(8)
    codeValue.value = codeRandom
</script>
<script src="/assets/js/ScoreTempAdd.js"></script>